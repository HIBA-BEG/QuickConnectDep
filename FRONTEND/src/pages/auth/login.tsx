import React, { useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { loginUser } from '../../Api/Auth.service';

const Login: React.FC = () => {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');
  const navigate = useNavigate();

  const handleLogin = async (e: React.FormEvent) => {
    e.preventDefault();
    setError('');

    console.log({ email, password });

    try {
      const user = await loginUser(email);
      localStorage.setItem('user', JSON.stringify(user));
      navigate('/users');
    } catch (error) {
      setError('Login failed. Please check your email and try again.');
    }
  };

  return (
    <div className="flex items-center justify-center min-h-screen bg-[#303030]">
      <div className="flex shadow-[_30px_30px_15px_4px_rgba(0,0,0,0.2)] rounded-lg overflow-hidden bg-[#202022] w-fit">
        <div className="flex-1 flex items-center justify-center bg-indigo-200 p-10">
          <div>
            <h2 className="text-3xl font-bold text-black mb-4">Welcome back</h2>
            <svg width="497" height="350" viewBox="0 0 497 350" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clipPath="url(#clip0_66_121)">
                <path d="M192.152 31.6202H131.854C129.785 31.6202 128.102 29.8389 128.102 27.6496C128.102 25.4602 129.785 23.679 131.854 23.679H192.152C194.221 23.679 195.904 25.4602 195.904 27.6496C195.904 29.8389 194.221 31.6202 192.152 31.6202Z" fill="#B3B3B3"/>
                <path d="M239.209 45.0594H131.854C129.785 45.0594 128.102 43.2781 128.102 41.0888C128.102 38.8994 129.785 37.1182 131.854 37.1182H239.209C241.277 37.1182 242.96 38.8994 242.96 41.0888C242.96 43.2781 241.277 45.0594 239.209 45.0594Z" fill="#B3B3B3"/>
                <path d="M239.209 58.3773H131.854C129.785 58.3773 128.102 56.596 128.102 54.4067C128.102 52.2173 129.785 50.436 131.854 50.436H239.209C241.277 50.436 242.96 52.2173 242.96 54.4067C242.96 56.596 241.277 58.3773 239.209 58.3773Z" fill="#E6E7E8"/>
                <path d="M250.58 127.491V125.588C229.831 125.588 211.711 107.649 206.893 82.6604L214.711 84.7891C210.93 80.9974 207.11 74.6497 204.74 69.4619C203.34 75.0312 200.726 82.0301 197.692 86.5114L205.089 82.8028C210.008 108.8 228.907 127.491 250.58 127.491Z" fill="#3F3D56"/>
                <path d="M242.731 54.6802C242.731 56.7783 241.119 58.4853 239.136 58.4853H192.397C190.415 58.4853 188.802 56.7783 188.802 54.6802C188.802 52.582 190.415 50.875 192.397 50.875H239.136C241.119 50.875 242.731 52.582 242.731 54.6802Z" fill="#6C63FF"/>
                <path d="M32.2714 266.645C31.5599 264.023 30.3415 261.786 28.8909 260.191L23.6204 234.763L12.1323 237.741L18.7156 263.215C18.2826 265.37 18.3693 267.943 19.0808 270.565C20.7062 276.555 24.9767 280.534 28.6192 279.452C32.2617 278.369 33.8969 272.635 32.2714 266.645Z" fill="#FFB6B6"/>
                <path d="M30.6822 99.8442C30.6822 99.8442 18.2739 99.391 11.0832 107.953C2.84494 118.604 -2.78629 160.338 1.44109 163.148L12.8946 249.226L29.2271 246.851L25.0354 143.57L30.6822 99.8442Z" fill="#6C63FF"/>
                <path d="M114.449 244.938L111.476 349.997H68.7815L67.0558 309.5L59.4696 349.997H13.7102L19.4178 280.381L25.3141 265.741L29.3049 255.819L114.449 244.938Z" fill="#2F2E41"/>
                <path d="M80.5382 82.6836L50.8768 80.781L40.9897 94.0991C32.4505 96.0342 24.7378 98.5323 19.4177 102.661C20.6905 142.545 17.8945 194.405 29.3049 204.449L19.1727 280.136C19.1727 280.136 23.2588 276.431 30.0843 277.739C32.4423 278.191 35.2888 283.813 38.1863 284.154C60.45 286.772 96.554 284.08 114.449 244.939L107.503 188.277L109.301 105.515C103.681 100.813 96.694 97.7576 88.6277 96.0017L80.5382 82.6836Z" fill="#6C63FF"/>
                <path d="M137.641 59.5303C137.963 62.8284 137.554 65.93 136.613 68.4168L141.554 99.6305L127.452 101.684L123.958 69.8C122.557 67.5693 121.558 64.6216 121.236 61.3235C120.501 53.789 123.577 47.2797 128.107 46.7846C132.637 46.2894 136.906 51.9959 137.641 59.5303Z" fill="#FFB6B6"/>
                <path d="M90.7554 107.899C89.2789 110.205 89.6902 112.797 89.3377 115.911C87.8411 129.13 111.776 168.194 128.338 172.691C130.511 173.282 131.75 175.763 133.943 176.262C140.441 177.74 146.491 172.281 146.141 165.256L141.642 75.1614L122.742 81.9841L123.952 128.76C123.831 119.069 115.424 109.202 109.056 105.099C109.056 105.099 96.1566 99.4649 90.7554 107.899Z" fill="#6C63FF"/>
                <path d="M68.7856 78.3192C83.2152 78.3192 94.9126 65.939 94.9126 50.6673C94.9126 35.3956 83.2152 23.0154 68.7856 23.0154C54.3561 23.0154 42.6587 35.3956 42.6587 50.6673C42.6587 65.939 54.3561 78.3192 68.7856 78.3192Z" fill="#FFB6B6"/>
                <path d="M93.1218 30.3625C92.8971 30.4197 96.5611 26.64 96.7172 26.5574C100.312 24.6548 96.6182 43.2525 94.0207 42.7293C87.6299 41.445 84.8706 38.8956 82.3898 45.2597C81.6977 47.0291 81.2663 49.0269 79.918 50.2921C78.0664 52.0139 74.9925 51.8712 73.4824 53.926C72.269 55.5813 72.6195 58.0166 73.5184 59.8811C74.4172 61.7552 75.7834 63.3438 76.6013 65.2559C77.5182 67.4058 73.6082 74.2456 72.1162 78.0888V78.0984L72.1073 78.1209C71.7108 79.129 70.7687 76.225 69.774 75.9351C68.5838 75.5883 66.8303 78.5628 64.9345 78.0222C64.9255 78.0222 64.9165 78.0127 64.9075 78.0127C63.1009 77.48 61.0875 76.9092 59.0921 76.3384H59.0831C53.4654 74.7213 52.0453 77.0424 51.7756 76.9758L48.2882 73.1136C47.0913 72.1913 47.2266 69.2139 46.3827 68.4142C45.6925 67.7602 43.9718 69.2714 43.4647 68.6428C40.9782 65.5606 40.4061 62.4773 38.9403 56.3899C37.6011 50.8248 34.8237 34.1677 40.5313 33.4161C45.9152 32.7027 41.9784 24.7689 47.3983 25.0638C47.0748 23.6178 47.677 22.0672 48.6567 21.0018C49.6274 19.9268 50.9217 19.2609 52.225 18.6901C58.6517 15.9124 57.5821 13.5247 64.3593 15.1418C65.0334 14.143 73.6778 11.539 74.9002 11.872C74.9901 11.891 73.015 15.9505 77.8417 15.1418C77.6619 16.312 80.2932 13.7746 80.5382 17.9957C85.6862 14.7259 88.4569 22.5524 88.6277 23.7035C88.8524 25.1399 86.803 24.4074 88.1693 24.6262C88.9782 24.7594 90.3624 26.5003 90.2276 27.3659C90.8118 26.5288 91.3961 25.7012 91.9893 24.864C92.0972 24.8735 92.196 24.8926 92.3039 24.9116C95.0363 25.4633 91.9037 34.9172 92.0163 31.9702C92.223 26.5574 95.8453 29.7252 93.1218 30.3625Z" fill="#2F2E41"/>
                <path d="M426.378 24.6934C425.413 33.0907 424.358 41.4765 423.214 49.8488C422.75 53.2492 422.258 56.6928 420.966 59.8445C420.083 61.9958 418.848 63.9603 417.619 65.9117C416.166 68.2177 414.69 70.5531 412.717 72.3759C410.745 74.1988 408.183 75.4787 405.572 75.2645C412.499 70.3296 417.154 61.9829 417.89 53.18C418.236 49.0421 417.761 44.8827 417.67 40.7297C417.579 36.5768 417.908 32.2794 419.718 28.5936C421.528 24.9079 425.105 21.9575 429.028 22.0623L426.378 24.6934Z" fill="#2F2E41"/>
                <path d="M356.178 203.796C350.541 208.634 343.614 209.479 340.705 205.683C337.796 201.887 340.007 194.888 345.643 190.05C348.11 187.932 350.825 186.58 353.341 186.046L377.466 165.863L386.174 178.047L361.468 196.65C360.455 199.146 358.645 201.678 356.178 203.796Z" fill="#A0616A"/>
                <path d="M360.735 176.396L396.682 140.297L400.277 137.443C400.277 137.443 420.912 116.166 426.255 115.678C428.518 115.473 430.781 116.07 432.688 117.381C435.768 119.494 437.363 122.974 437.363 126.481C437.363 129.412 436.248 132.356 433.965 134.525L401.056 165.793L387.056 179.093L369.644 195.64L367.874 191.825L361.889 178.894L360.735 176.396Z" fill="#6C63FF"/>
                <path d="M437.598 151.965L401.606 163.633C407.632 165.429 410.155 204.29 404.547 205.498C404.547 205.498 464.198 209.988 460.943 205.498C456.975 200.024 462.296 163.648 464.833 163.633L437.598 151.965Z" fill="#A0616A"/>
                <path d="M485.491 350L482.345 309.817C482.345 295.443 481.464 282.458 480.053 270.881C474.399 224.41 460.225 200.59 460.225 200.59H407.194C407.122 200.676 407.05 200.742 406.978 200.828L406.969 200.837C394.457 214.755 387.95 249.753 385.056 270.881C383.68 280.936 383.123 287.852 383.123 287.852L377.937 336.634L381.685 350H412.542L412.057 347.137L431.912 270.881L432.154 269.949L432.37 270.881L450.778 350L485.491 350Z" fill="#2F2E41"/>
                <path d="M408.281 128.785L419.487 104.844L428.929 87.4503L436.564 79.2146H457.461L459.406 87.4503L471.079 94.3134L475.207 128.629L460.498 203.082C442.99 187.983 406.903 183.801 406.903 183.801L401.056 165.793L397.191 144.098L396.724 141.504L408.281 128.785Z" fill="#6C63FF"/>
                <path d="M406.936 172.094C399.682 171.876 393.908 167.739 394.039 162.853C394.17 157.968 400.157 154.184 407.41 154.402C410.586 154.497 413.477 155.344 415.714 156.675L446.441 158.006L445.543 173.253L415.349 170.323C413.044 171.518 410.111 172.189 406.936 172.094Z" fill="#A0616A"/>
                <path d="M446.23 120.051L475.214 150.506L424.729 155.978L412.996 173.444L483.364 175.913C489.713 178.306 496.476 173.662 496.998 166.551C497.175 164.15 482.718 103.221 473.967 97.5648C463.709 90.9352 446.23 120.051 446.23 120.051Z" fill="#6C63FF"/>
                <path d="M466.364 49.3317C466.574 35.4986 456.15 24.1038 443.079 23.8808C430.009 23.6577 419.243 34.6908 419.032 48.524C418.821 62.3571 429.246 73.7519 442.316 73.9749C455.386 74.198 466.153 63.1648 466.364 49.3317Z" fill="#A0616A"/>
                <path d="M494.654 126.978C494.061 129.357 489.441 130.584 488.362 133.637C484.929 135.711 486.789 118.769 485.405 117.656C484.335 116.809 484.048 118.854 483.805 117.094C482.888 110.493 476.893 111.967 472.453 110.902C471.949 109.865 471.563 108.856 471.311 107.876C470.862 106.107 468.813 105.489 467.599 106.792C467.051 106.278 466.655 104.461 466.269 102.644C465.99 101.322 465.712 99.9998 465.388 99.1627L462.296 91.7806L463.294 97.2791C461.271 96.5085 459.231 97.3076 458.054 94.663C456.544 91.2669 455.941 87.2905 457.038 83.7231C458.036 80.4888 459.716 74.0105 461.613 68.6452C459.465 70.2909 456.885 71.4895 453.892 72.0889C454.953 69.958 456.031 67.789 456.481 65.4203C456.921 63.0516 456.651 60.4165 455.231 58.5329C454.063 56.9823 452.337 57.3723 450.881 56.1261C449.748 55.1559 448.769 52.673 448.086 51.3126C450.998 61.558 453.2 72.4408 449.497 82.2201C446.935 88.9933 441.542 94.5013 435.07 97.0032C438.513 94.3967 441.875 91.6189 444.454 88.0801C447.214 84.2844 449.011 79.4899 448.463 74.7334C447.6 67.2658 434.513 43.6452 432.904 39.0029C433.785 43.5406 433.444 47.0794 431.125 49.0295C430.522 42.4466 423.745 43.0459 420.051 40.4108C420.051 40.4108 417.193 23.3161 423.898 23.2114C427.134 23.1639 430.522 15.1159 433.462 13.6795C438.153 11.3869 441.03 12.947 446.234 13.1182C451.429 13.2799 456.418 15.6486 459.591 19.9961C461.253 22.2697 461.865 20.4622 464.363 21.8796C466.736 23.221 468.336 21.9748 471.024 22.0603C476.408 22.2126 481.63 25.2567 484.65 29.9656C487.67 34.684 489.531 34.2464 488.335 41.5429C488.317 41.6284 488.317 41.7997 488.335 42.0565C488.991 53.5482 487.311 65.0683 483.005 75.6467C481.675 78.9001 488.182 82.258 488.173 86.32C488.164 91.0385 480.983 95.3384 481.648 97.3552C483.553 107.068 494.258 104.908 491.733 121.166C491.526 122.488 495.049 125.39 494.654 126.978Z" fill="#2F2E41"/>
                <path d="M429.082 97.2322C429.28 97.1657 429.478 97.0896 429.675 97.0039C429.424 97.1942 429.181 97.3749 428.929 97.5652L429.082 97.2322Z" fill="#2F2E41"/>
                <path d="M462.422 17.0855C459.847 17.4904 457.231 12.9694 458.693 6.69971C461.879 11.8553 463.507 17.6592 463.763 24.0343L462.047 24.5973L462.422 17.0855Z" fill="#6C63FF"/>
                <path d="M475.576 11.2334C473.819 17.8227 464.897 22.2325 463.32 19.9394L463.14 23.8689L462.037 22.3669C465.237 17.3304 469.599 13.4667 475.576 11.2334Z" fill="#6C63FF"/>
                <path d="M279.645 188.921C279.645 186.731 281.328 184.95 283.397 184.95H343.695C345.763 184.95 347.446 186.731 347.446 188.921C347.446 191.11 345.763 192.891 343.695 192.891H283.397C281.328 192.891 279.645 191.11 279.645 188.921Z" fill="#B3B3B3"/>
                <path d="M279.645 215.557C279.645 213.368 281.328 211.586 283.397 211.586H343.695C345.763 211.586 347.446 213.368 347.446 215.557C347.446 217.746 345.763 219.528 343.695 219.528H283.397C281.328 219.528 279.645 217.746 279.645 215.557Z" fill="#B3B3B3"/>
                <path d="M236.34 206.33C234.271 206.33 232.588 204.549 232.588 202.36C232.588 200.17 234.271 198.389 236.34 198.389H343.695C345.763 198.389 347.446 200.17 347.446 202.36C347.446 204.549 345.763 206.33 343.695 206.33H236.34Z" fill="#B3B3B3"/>
                <path d="M228.359 168.328L220.961 164.62C223.995 169.101 226.61 176.1 228.009 181.669C230.379 176.481 234.199 170.134 237.981 166.342L230.163 168.471C234.98 143.482 253.1 125.543 273.85 125.543V123.64C252.176 123.64 233.277 142.331 228.359 168.328Z" fill="#3F3D56"/>
                <path d="M262.406 206.403H215.666C213.684 206.403 212.071 204.696 212.071 202.598C212.071 200.5 213.684 198.792 215.666 198.792H262.406C264.388 198.792 266.001 200.5 266.001 202.598C266.001 204.696 264.388 206.403 262.406 206.403Z" fill="#6C63FF"/>
                <path d="M276.056 128.582C277.301 120.462 272.091 112.811 264.419 111.493C256.747 110.176 249.518 115.69 248.273 123.81C247.028 131.93 252.238 139.581 259.911 140.898C267.583 142.216 274.811 136.702 276.056 128.582Z" fill="#3F3D56"/>
                <path d="M185.764 18.374C190.558 18.374 194.445 14.2608 194.445 9.18698C194.445 4.11315 190.558 0 185.764 0C180.97 0 177.084 4.11315 177.084 9.18698C177.084 14.2608 180.97 18.374 185.764 18.374Z" fill="#D3D3D3"/>
                <path d="M287.332 177.24C292.126 177.24 296.012 173.127 296.012 168.053C296.012 162.979 292.126 158.866 287.332 158.866C282.538 158.866 278.652 162.979 278.652 168.053C278.652 173.127 282.538 177.24 287.332 177.24Z" fill="#D3D3D3"/>
                </g>
                <defs>
                <clipPath id="clip0_66_121">
                <rect width="497" height="350" fill="white"/>
                </clipPath>
                </defs>
            </svg>
          </div>
        </div>
        <div className="flex-1 p-8 text-white">
          <h2 className="text-2xl font-semibold text-center mb-6">Sign In</h2>
          <form onSubmit={handleLogin}>
            <label htmlFor="email" className="block text-sm mb-2">Email:</label>
            <input
              type="email"
              id="email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              className="w-[400px] px-4 py-2 rounded-md bg-[#333333] text-white border border-gray-600 focus:outline-none focus:border-indigo-500"
              placeholder="example@example.com"
            />
            <label htmlFor="password" className="block text-sm mb-2">Password:</label>
            <input
              type="password"
              id="password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              className="w-full px-4 py-2 rounded-md bg-[#333333] text-white border border-gray-600 focus:outline-none focus:border-indigo-500"
              placeholder="********"
            />
            <a href="#" className="text-sm text-end text-gray-500 hover:text-indigo-400">Forgot password?</a>
            <button type="submit" className="w-full bg-indigo-500 text-white p-2 rounded font-semibold mt-4">
              LOGIN
            </button>
          </form>
          <div className="text-end mt-4">
            <p className="text-sm text-gray-500 mt-2">
                Need an account? <Link to="/SignUp" className="text-indigo-400 hover:text-indigo-600">Register</Link>
            </p>

          </div>
          {error && <p className="text-red-500 text-sm mt-2">{error}</p>}
        </div>
      </div>
    </div>
  );
};

export default Login;
